{"version":3,"sources":["./src/app/admin/service/ncc-detail.service.ts","./src/app/page/loading/loading.module.ts"],"names":[],"mappings":"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","file":"chitietnhacungcap-chitietnhacungcap-module-es2015.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { ThongbaoService } from './thongbao.service';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\n\r\nimport { LoginService } from './login.service';\r\nimport { map } from 'rxjs/operators';\r\nimport { LoadingService } from './loading.service';\r\nimport { Sanpham } from 'src/app/models/sanpham';\r\nimport { DanhMucHinh } from 'src/app/models/danhmuchinh';\r\nimport { Rating } from 'src/app/models/rating';\r\nimport { environment } from 'src/app/environments/environment.prod';\r\nimport { DanhGia } from 'src/app/models/danhgia';\r\nimport { Nhacungcap } from 'src/app/models/nhacungcap';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class NccDetailService {\r\n    constructor(\r\n        public http: HttpClient,\r\n        public thongbaoService: ThongbaoService,\r\n        public loadingService: LoadingService\r\n    ) {\r\n        this.ProductDetailSub = new BehaviorSubject<Nhacungcap>(this.product);\r\n        this.ProductDetailObs = this.ProductDetailSub.asObservable();   \r\n    }\r\n    private API: string = environment.api_url + '/api/admin/';\r\n    private product: Nhacungcap;\r\n    public ProductDetailSub: BehaviorSubject<Nhacungcap>;\r\n    public ProductDetailObs: Observable<Nhacungcap>;\r\n    \r\n    FetchProduct(sanpham_id) {\r\n        this.loadingService.LoadingSub.next(true);\r\n        this.http.get<any>(this.API + 'nhacungcap/' + sanpham_id).subscribe(\r\n            res => {\r\n                this.ProductDetailSub.next(res['data']);          \r\n            },\r\n            err => {},\r\n            () => this.loadingService.LoadingSub.next(false),\r\n            );            \r\n    } \r\n    findIndex(array, id: number) {\r\n        return array.findIndex(e => e.id === id);\r\n    }   \r\n    update_hinh(value) {\r\n        value.append('_method', 'put');\r\n        const url = `${this.API}nhacungcap/${value.get('id')}/changehinh`;\r\n        this.loadingService.LoadingSub.next(true);\r\n        this.http.post<any>(url, value).subscribe(\r\n            res => {\r\n                if (res['status'] === 'OK') {\r\n                    const index = this.findIndex(\r\n                        this.ProductDetailSub.value,\r\n                        Number.parseInt(value.get('id') + '')\r\n                    );\r\n                    if (index !== -1) {\r\n                        this.ProductDetailSub.value[index] = res['data'];\r\n                        this.ProductDetailSub.next(this.ProductDetailSub.value);                                           \r\n                    }\r\n                }               \r\n                this.thongbaoService.open(\r\n                    'Cập nhật thành công ảnh đại diện!',\r\n                    'bg-success'\r\n                );\r\n                this.FetchProduct( Number.parseInt(value.get('id') + ''));\r\n            },\r\n            () => {},\r\n            () => this.loadingService.LoadingSub.next(false)\r\n        ); \r\n    }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LoadingComponent } from './loading.component';\n\n@NgModule({\n  declarations: [LoadingComponent],\n  imports: [CommonModule],\n  exports: [LoadingComponent]\n})\nexport class LoadingModule { }\n"],"sourceRoot":"webpack:///"}