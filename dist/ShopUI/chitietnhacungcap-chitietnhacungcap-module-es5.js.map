{"version":3,"sources":["webpack:///src/app/admin/service/ncc-detail.service.ts","webpack:///src/app/page/loading/loading.module.ts"],"names":["NccDetailService","http","thongbaoService","loadingService","API","api_url","ProductDetailSub","product","ProductDetailObs","asObservable","sanpham_id","LoadingSub","next","get","subscribe","res","err","array","id","findIndex","e","value","append","url","post","index","Number","parseInt","open","FetchProduct","providedIn","LoadingModule","declarations","imports","exports"],"mappings":"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","file":"chitietnhacungcap-chitietnhacungcap-module-es5.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { ThongbaoService } from './thongbao.service';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\n\r\nimport { LoginService } from './login.service';\r\nimport { map } from 'rxjs/operators';\r\nimport { LoadingService } from './loading.service';\r\nimport { Sanpham } from 'src/app/models/sanpham';\r\nimport { DanhMucHinh } from 'src/app/models/danhmuchinh';\r\nimport { Rating } from 'src/app/models/rating';\r\nimport { environment } from 'src/app/environments/environment.prod';\r\nimport { DanhGia } from 'src/app/models/danhgia';\r\nimport { Nhacungcap } from 'src/app/models/nhacungcap';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class NccDetailService {\r\n    constructor(\r\n        public http: HttpClient,\r\n        public thongbaoService: ThongbaoService,\r\n        public loadingService: LoadingService\r\n    ) {\r\n        this.ProductDetailSub = new BehaviorSubject<Nhacungcap>(this.product);\r\n        this.ProductDetailObs = this.ProductDetailSub.asObservable();   \r\n    }\r\n    private API: string = environment.api_url + '/api/admin/';\r\n    private product: Nhacungcap;\r\n    public ProductDetailSub: BehaviorSubject<Nhacungcap>;\r\n    public ProductDetailObs: Observable<Nhacungcap>;\r\n    \r\n    FetchProduct(sanpham_id) {\r\n        this.loadingService.LoadingSub.next(true);\r\n        this.http.get<any>(this.API + 'nhacungcap/' + sanpham_id).subscribe(\r\n            res => {\r\n                this.ProductDetailSub.next(res['data']);          \r\n            },\r\n            err => {},\r\n            () => this.loadingService.LoadingSub.next(false),\r\n            );            \r\n    } \r\n    findIndex(array, id: number) {\r\n        return array.findIndex(e => e.id === id);\r\n    }   \r\n    update_hinh(value) {\r\n        value.append('_method', 'put');\r\n        const url = `${this.API}nhacungcap/${value.get('id')}/changehinh`;\r\n        this.loadingService.LoadingSub.next(true);\r\n        this.http.post<any>(url, value).subscribe(\r\n            res => {\r\n                if (res['status'] === 'OK') {\r\n                    const index = this.findIndex(\r\n                        this.ProductDetailSub.value,\r\n                        Number.parseInt(value.get('id') + '')\r\n                    );\r\n                    if (index !== -1) {\r\n                        this.ProductDetailSub.value[index] = res['data'];\r\n                        this.ProductDetailSub.next(this.ProductDetailSub.value);                                           \r\n                    }\r\n                }               \r\n                this.thongbaoService.open(\r\n                    'Cập nhật thành công ảnh đại diện!',\r\n                    'bg-success'\r\n                );\r\n                this.FetchProduct( Number.parseInt(value.get('id') + ''));\r\n            },\r\n            () => {},\r\n            () => this.loadingService.LoadingSub.next(false)\r\n        ); \r\n    }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LoadingComponent } from './loading.component';\n\n@NgModule({\n  declarations: [LoadingComponent],\n  imports: [CommonModule],\n  exports: [LoadingComponent]\n})\nexport class LoadingModule { }\n"]}