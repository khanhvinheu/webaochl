{"version":3,"sources":["webpack:///src/app/admin/service/product-detail.service.ts","webpack:///src/app/page/chitietsanpham/chitietsanpham.component.ts","webpack:///src/app/page/chitietsanpham/chitietsanpham.component.html","webpack:///src/app/page/chitietsanpham/chitietsanpham.module.ts","webpack:///src/app/page/chitietsanpham/danhgia/danhgia.component.ts","webpack:///src/app/page/chitietsanpham/danhgia/danhgia.component.html","webpack:///src/app/page/loading/loading.module.ts"],"names":["ProductDetailService","http","thongbaoService","loadingService","API","api_url","images","ratings","ProductDetailSub","product","ProductDetailObs","asObservable","ImageDetailSub","ImageDetailObs","RatingDetailSub","RatingDetailObs","CanRateDetailSub","CanRateDetailObs","sanpham_id","LoadingSub","next","get","subscribe","res","err","user_id","formData","FormData","append","post","danhgia","value","push","url","id","map","e","index","splice","providedIn","ChitietsanphamComponent","activatedRoute","cartService","productdetailService","loginService","textShow","api_img","soluong","currentUser","currentHinh","hinhs","subscriptions","slideConfig","infinite","vertical","verticalSwiping","slidesToShow","slidesToScroll","swipe","touchMove","nextArrow","prevArrow","responsive","breakpoint","settings","dot","loadData","forEach","unsubscribe","data","hinhAnh","checkBill","params","FetchProduct","document","body","scrollTop","sp","soLuong","addCart","open","onMinus","onPlus","onAddCart","selector","templateUrl","styleUrls","routing","path","component","Routing","forChild","ChitietsanphamModule","declarations","imports","exports","DanhgiaComponent","userService","_formBuilder","canRate","currentRate","danhgias","users","createForm","frm","group","NoiDung","required","minLength","maxLength","Diem","idSanPham","idTaikhoan","createRating","deleteRating","item","length","w","reduce","tongdiem","number","filter","LoadingModule"],"mappings":"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","file":"default~chitietsanpham-chitietsanpham-module~page-page-module-es5.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { ThongbaoService } from './thongbao.service';\nimport { BehaviorSubject, Observable } from 'rxjs';\n\nimport { LoginService } from './login.service';\nimport { map } from 'rxjs/operators';\nimport { LoadingService } from './loading.service';\nimport { Sanpham } from 'src/app/models/sanpham';\nimport { DanhMucHinh } from 'src/app/models/danhmuchinh';\nimport { Rating } from 'src/app/models/rating';\nimport { environment } from 'src/app/environments/environment.prod';\nimport { DanhGia } from 'src/app/models/danhgia';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ProductDetailService {\n    constructor(\n        public http: HttpClient,\n        public thongbaoService: ThongbaoService,\n        public loadingService: LoadingService\n    ) {\n        this.ProductDetailSub = new BehaviorSubject<Sanpham>(this.product);\n        this.ProductDetailObs = this.ProductDetailSub.asObservable();\n        this.ImageDetailSub = new BehaviorSubject<DanhMucHinh[]>(this.images);\n        this.ImageDetailObs = this.ImageDetailSub.asObservable();\n        this.RatingDetailSub = new BehaviorSubject<Rating[]>(this.ratings);\n        this.RatingDetailObs = this.RatingDetailSub.asObservable();\n        this.CanRateDetailSub = new BehaviorSubject<boolean>(false);\n        this.CanRateDetailObs = this.CanRateDetailSub.asObservable();\n    }\n    private API: string = environment.api_url + '/api/admin/';\n    private product: Sanpham;\n    private images: DanhMucHinh[] = [];\n    private ratings: Rating[] = [];\n    public ProductDetailSub: BehaviorSubject<Sanpham>;\n    public ProductDetailObs: Observable<Sanpham>;\n    public ImageDetailSub: BehaviorSubject<DanhMucHinh[]>;\n    public ImageDetailObs: Observable<DanhMucHinh[]>;\n    public RatingDetailSub: BehaviorSubject<Rating[]>;\n    public RatingDetailObs: Observable<Rating[]>;\n    public CanRateDetailSub: BehaviorSubject<boolean>;\n    public CanRateDetailObs: Observable<boolean>;\n    FetchProduct(sanpham_id) {\n        this.loadingService.LoadingSub.next(true);\n        this.http.get<any>(this.API + 'product-detail/' + sanpham_id).subscribe(\n            res => {\n                this.ProductDetailSub.next(res['product'][0]);\n                this.ImageDetailSub.next(res['images']);\n                this.RatingDetailSub.next(res['ratings']);\n            },\n            err => {},\n            () => this.loadingService.LoadingSub.next(false)\n        );\n    }\n    checkBill(user_id, sanpham_id) {\n        const formData = new FormData();\n        formData.append('idUser', user_id);\n        formData.append('idSanPham', sanpham_id);\n        this.http\n            .post<boolean>(this.API + 'check-bill', formData)\n            .subscribe(res => {\n                if (res) {\n                    this.CanRateDetailSub.next(res);\n                }\n            });\n    }\n    createRating(danhgia) {\n        this.http\n            .post<any>(this.API + 'create-rating', danhgia)\n            .subscribe(res => {\n                if (res['status'] === 'OK') {\n                    this.RatingDetailSub.value.push(res['data']);\n                    this.RatingDetailSub.next(this.RatingDetailSub.value);\n                    this.CanRateDetailSub.next(false);\n                }\n            });\n    }\n    deleteRating(danhgia: DanhGia) {\n        const url = `${this.API + 'danhgia'}/${danhgia.id}`;\n        return this.http.delete(url).subscribe(res => {\n            if (res) {\n                this.RatingDetailSub.value.map((e, index) => {\n                    if (e.id === danhgia.id) {\n                        this.RatingDetailSub.value.splice(index, 1);\n                        this.RatingDetailSub.next(this.RatingDetailSub.value);\n                        this.CanRateDetailSub.next(true);\n                    }\n                    return e;\n                });\n            }\n        });\n    }\n}\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { DanhgiaComponent } from './danhgia/danhgia.component';\nimport { ActivatedRoute } from '@angular/router';\nimport { ProductDetailService } from 'src/app/admin/service/product-detail.service';\nimport { LoginService } from 'src/app/admin/service/login.service';\nimport { Subscription } from 'rxjs';\nimport { DanhMucHinh } from 'src/app/models/danhmuchinh';\nimport { Sanpham } from 'src/app/models/sanpham';\nimport { Taikhoan } from 'src/app/models/taikhoan';\nimport { environment } from 'src/app/environments/environment.prod';\nimport { debounceTime } from 'rxjs/operators';\nimport { CartService } from 'src/app/admin/service/cart.service';\nimport { Cart } from 'src/app/models/cart';\nimport { ThongbaoService } from 'src/app/admin/service/thongbao.service';\n\n@Component({\n  selector: 'app-chitietsanpham',\n  templateUrl: './chitietsanpham.component.html',\n  styleUrls: ['./chitietsanpham.component.sass']\n})\nexport class ChitietsanphamComponent implements OnInit {\n  textShow = false;\n  api_url = environment.api_img;\n  soluong = 1;\n  currentUser: Taikhoan = null;\n  currentHinh = '';\n  product: Sanpham;\n  hinhs: DanhMucHinh[] = [];\n  subscriptions: Subscription[] = [];\n  slideConfig = {\n      infinite: false,\n      vertical: true,\n      verticalSwiping: true,\n      slidesToShow: 5,\n      slidesToScroll: 1,\n      swipe: true,\n      touchMove: true,\n      nextArrow: '.next',\n      prevArrow: '.prev',\n      responsive: [\n          {\n              breakpoint: 768,\n              settings: {\n                  vertical: false,\n                  verticalSwiping: false,\n                  slidesToShow: 4,\n                  dot: true\n              }\n          }\n      ]\n  };\n  @ViewChild(DanhgiaComponent, { static: true })\n  danhgia_com: DanhgiaComponent;\n  constructor(\n      private activatedRoute: ActivatedRoute,\n      private cartService: CartService,\n      private productdetailService: ProductDetailService,\n      private loginService: LoginService,\n      private thongbaoService: ThongbaoService\n  ) {}\n  ngOnInit() {\n      this.loadData();\n  }\n  ngOnDestroy(): void {\n      if (this.subscriptions) {\n          this.subscriptions.forEach(e => {\n              e.unsubscribe();\n          });\n      }\n  }\n  onPlus() {\n      if (this.soluong < 10) {\n          this.soluong++;\n      }\n  }\n  onMinus() {\n      if (this.soluong > 1) {\n          this.soluong--;\n      }\n  }\n  loadData() {\n      this.subscriptions.push(\n          this.productdetailService.ProductDetailObs.subscribe(data => {\n              if (data) {\n                  this.product = data;\n                  this.currentHinh = this.product.hinhAnh;\n              }\n          }),\n          this.loginService.currentUser.subscribe(data => {\n              this.currentUser = data;\n              if (this.currentUser) {\n                  this.productdetailService.checkBill(\n                      this.currentUser.id,\n                      this.activatedRoute.params['value'].id\n                  );\n              }\n          }),\n          this.activatedRoute.params.subscribe(data => {\n              this.productdetailService.FetchProduct(\n                  this.activatedRoute.params['value'].id\n              );\n              if (this.currentUser) {\n                  this.productdetailService.checkBill(\n                      this.currentUser.id,\n                      this.activatedRoute.params['value'].id\n                  );\n              }\n              document.body.scrollTop = 0;\n          }),\n          this.productdetailService.ImageDetailObs.subscribe(data => {\n              if (data) {\n                  this.hinhs = data;\n              }\n          }),\n          this.loginService.currentUser.subscribe(data => {})\n      );\n  }\n  onChangeHinh(e) {\n      debounceTime(400);\n      this.currentHinh = e.hinhAnh;\n  }\n  onAddCart(sp: Sanpham) {\n      if(sp.soLuong>0){\n          this.cartService.addCart(new Cart(sp.id, this.soluong));\n          this.thongbaoService.open(\n            'Đã thêm sản phẩm vào giỏ hàng thành công',\n            'bg-success'\n        )\n      }\n      else{\n        this.thongbaoService.open(\n            'Sản phẩm đã hết! Vui lòng chọn sản phẩm khác',\n            'bg-danger'\n        )\n      }\n  }\n\n}\n","<app-loading></app-loading>\n<div class=\"container\">\n    <div class=\"row\">\n\n        <div class=\" col-md-2 col-lg-1 col-12 box_list_hinh flex-row order-2 order-md-1 p-0\">\n            <span class=\"fa fa-angle-up prev d-none d-md-block\"></span>\n\n            <ngx-slick-carousel #slickModal=\"slick-carousel\" [config]=\"slideConfig\" class=\"bg-default\">\n                <div ngxSlickItem *ngFor=\"let item of hinhs\">\n                    <div class=\"p-1\">\n                        <span\n                            class=\"rounded-lg bg-white border-light border d-flex align-items-center my-md-2 mx-md-0 my-0 mx-2 \">\n                            <img src=\"{{api_url}}/upload/sanpham/{{ item?.hinhAnh }}\" (mouseenter)=\"onChangeHinh(item)\"\n                                alt=\"\">\n                        </span>\n                    </div>\n                </div>\n            </ngx-slick-carousel>\n\n            <span class=\"fa fa-angle-down next mt-2 d-none d-md-block\"></span>\n\n        </div>\n        <div class=\"col-lg-5 col-md-10 col-12 p-5 py-md-0 order-1 order-md-2 d-flex justify-content-center\">\n            <div\n                class=\"img_sanpham text-center px-md-2 py-md-4 px-3 d-flex justify-content-center mx-auto strect_img_chitiet m-auto\">\n                <img *ngIf=\"currentHinh\" src=\"{{api_url}}/upload/sanpham/{{currentHinh }}\" class=\"strect_img_chitiet\"\n                    style=\"object-fit: contain\">\n            </div>\n        </div>\n        <div class=\"col-lg-6 col-12 order-3 px-0\">\n            <div class=\"box_content_chitiet py-5\">\n                <div class=\"px-2\">\n                    <h4 class=\"title_chitiet\">{{ product?.tenSanpham |titlecase}}</h4>\n                    <!-- <span class=\"text-secondary mr-2\">Nhà sản xuất:</span>\n                    <span class=\"mr-2\">{{ product?.TenNSX  |titlecase}}</span> -->\n\n                    <div class=\"mota_chitiet p-2\" style=\"min-height: 100px;word-break: break_work\"\n                        [innerHtml]=\"product?.moTa\">\n\n                    </div>\n                    <hr>\n\n                    <ng-container *ngIf=\"product && product.soLuong === 0; else elseBlock\">\n                        <span class=\"gia_chitiet text-danger d-block\">Hết hàng</span>\n                        <div class=\"d-flex flex-row\">\n                            <span class=\"card_old_cost font_size_0_8\"></span>\n                            <span class=\"card_label_km btn btn-sm btn-danger p-0 font_size_0_8\">\n\n                            </span>\n                        </div>\n                    </ng-container>\n                    <ng-template #elseBlock>\n                        <span class=\"gia_chitiet text-danger d-block\">\n                            {{ product?.gia | currency:'VND':'symbol'}}\n                        </span>\n                        <!-- <div class=\"d-flex flex-row\" *ngIf=\"product?.rate != null\">\n                            <span class=\"card_old_cost font_size_0_8\">\n                                {{product?.gia | currency:'VND':'symbol'}}</span>\n                            <span class=\"card_label_km btn btn-sm btn-danger p-0 font_size_0_8\">\n                                -{{ (product?.gia)*100 | number:'1.0-1' }}%\n                            </span>\n                        </div> -->\n                    </ng-template>\n                    <hr>\n                    <div class=\"col-lg-12 d-md-flex d-none\">\n                        <div class=\"row\">\n                            <div class=\"col-md-3 p-0 col-5\">\n                                <span class=\"text-left\" style=\"line-height: 38px\"> Số lượng:\n                                </span>\n                            </div>\n                            <div class=\"input-group col-md-4 col-7\">\n                                <span class=\"input-group-prepend\">\n                                    <button type=\"button\" class=\"btn btn-danger btn-number\" (click)=\"onMinus()\"\n                                        [disabled]=\"soluong==1\">\n                                        <span class=\"fa fa-minus\"></span>\n                                    </button>\n                                </span>\n                                <input class=\"form-control  text-center \" readonly type=\"text\" [(ngModel)]=\"soluong\">\n                                <span class=\"input-group-append\">\n                                    <button type=\"button\" class=\"btn btn-success btn-number\" (click)=\"onPlus()\"\n                                        [disabled]=\"soluong==10\">\n                                        <span class=\"fa fa-plus\"></span>\n                                    </button>\n                                </span>\n                            </div>\n                            <div class=\"col-md-5 p-0 col-12\">\n                                <span class=\"text-left\" style=\"line-height: 38px\">\n                                    ( Còn {{product?.soLuong}} sản phẩm )\n                                </span>\n                            </div>\n\n                        </div>\n                    </div>\n                    <div class=\"d-md-flex flex-row d-none   py-4 \">\n                        <span class=\"btn btn-danger w-100 mr-2 btn_muangay\" (click)=\"onAddCart(product)\">Mua\n                            ngay</span>\n                        <span class=\"btn btn-secondary w-100 btn_themsp\" (click)=\"onAddCart(product)\">Thêm vào giỏ\n                            hàng</span>\n                    </div>\n                </div>\n                <div class=\"d-block d-md-none bg-white  w-100 p-2  mat-elevation-z8\"\n                    style=\"position: sticky;bottom: 0;z-index: 999;left:0\">\n                    <div class=\"col-lg-12\">\n                        <div class=\"row\">\n                            <div class=\"input-group col-7 p-0\" style=\"transform: scale(0.8);margin-left: -1.3rem\">\n                                <span class=\"input-group-prepend\">\n                                    <button type=\"button\" class=\"btn btn-danger btn-number\" (click)=\"onMinus()\"\n                                        [disabled]=\"soluong==1\">\n                                        <span class=\"fa fa-minus\"></span>\n                                    </button>\n                                </span>\n                                <input class=\"form-control  text-center \" type=\"text\" [(ngModel)]=\"soluong\">\n                                <span class=\"input-group-append\">\n                                    <button type=\"button\" class=\"btn btn-success btn-number\" (click)=\"onPlus()\"\n                                        [disabled]=\"soluong==10\">\n                                        <span class=\"fa fa-plus\"></span>\n                                    </button>\n                                </span>\n                            </div>\n                            <div class=\" p-0 col-5\">\n                                <span class=\"text-left\" style=\"line-height: 38px\">\n                                    ( {{\"Còn \"+ product?.soLuong +\" sản phẩm\" | textTruncate:0:11}} )\n                                </span>\n                            </div>\n                        </div>\n\n                    </div>\n                    <div class=\"d-flex flex-row mt-2 \">\n                        <span class=\"btn btn-sm btn-danger w-100 mr-2 btn_muangay\" (click)=\"onAddCart(product)\">Mua\n                            ngay</span>\n                        <span class=\"btn btn-sm btn-secondary w-100 btn_themsp\" (click)=\"onAddCart(product)\">Thêm vào\n                            giỏ hàng</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <br>\n</div>\n<div class=\"container p-0\">\n    <div class=\"col-lg-12 p-0\">\n        <div class=\"tab_chitiet my-2\">\n            <!-- Nav tabs -->\n            <ul class=\"nav nav-tabs \" style=\"border-bottom: 1px sloid\">\n                <li class=\"nav-item\">\n                    <a class=\"nav-link active\" data-toggle=\"tab\" href=\"#home\">Thông tin sản phẩm</a>\n                </li>\n                <li class=\"nav-item\">\n                    <a class=\"nav-link\" data-toggle=\"tab\" href=\"#menu_danhgia\">Đánh giá</a>\n                </li>\n            </ul>\n\n            <!-- Tab panes -->\n            <div class=\"tab-content  pt-md-5 px-md-3 py-1 border border-top-0  bg-khoi3\" style=\"border-color: #e9ecef\">\n                <div class=\"tab-pane container active\" id=\"home\">\n                    <div class=\"content_mota_chitiet overflow-hidden\"\n                        [innerHtml]=\"product?.thongTin | textTruncate:0:200:!textShow | noSanitize\">\n\n                    </div>\n                    <div class=\"w-100 text-center p-3\"><span class=\"btn btn-warning\" (click)=\"textShow=!textShow\">View\n                            more</span></div>\n                </div>\n                <div class=\"tab-pane container fade px-1 \" id=\"menu_danhgia\">\n                    <app-danhgia></app-danhgia>\n                </div>\n            </div>\n        </div>\n\n    </div>\n    <br>\n    <div class=\"col-lg-12 p-0 mx-0\">\n        <span class=\"title_sp_lq\">SẢN PHẨM LIÊN QUAN</span>\n        <div class=\"slide_sp_lienquan\">\n            <!-- <app-sanphamlienquan></app-sanphamlienquan> -->\n        </div>\n    </div>\n</div>\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ChitietsanphamComponent } from './chitietsanpham.component';\nimport { ShareModule } from 'src/app/share/share.module';\nimport { Routes, RouterModule } from '@angular/router';\nimport { SlickCarouselModule } from 'ngx-slick-carousel';\nimport { LoadingModule } from '../loading/loading.module';\nimport { DanhgiaComponent } from './danhgia/danhgia.component';\n\nconst routing: Routes = [{ path: '', component: ChitietsanphamComponent }];\nconst Routing: ModuleWithProviders = RouterModule.forChild(routing);\n@NgModule({\n  declarations: [\n    ChitietsanphamComponent,\n    DanhgiaComponent\n  ],\n  imports: [\n    CommonModule,\n    ShareModule,\n    Routing,\n    SlickCarouselModule,\n    LoadingModule\n  ],\n  exports:[\n    ChitietsanphamComponent\n  ]\n})\nexport class ChitietsanphamModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { DanhGia } from 'src/app/models/danhgia';\nimport { Rating } from 'src/app/models/rating';\nimport { Taikhoan } from 'src/app/models/taikhoan';\nimport { Subscription } from 'rxjs';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { TaikhoanService } from 'src/app/admin/service/taikhoan.service';\nimport { ActivatedRoute } from '@angular/router';\nimport { LoginService } from 'src/app/admin/service/login.service';\nimport { ProductDetailService } from 'src/app/admin/service/product-detail.service';\nimport { environment } from 'src/app/environments/environment.prod';\n\n@Component({\n  selector: 'app-danhgia',\n  templateUrl: './danhgia.component.html',\n  styleUrls: ['./danhgia.component.sass']\n})\nexport class DanhgiaComponent implements OnInit {\n\n  api_url = environment.api_img;\n    canRate = false;\n    currentRate = 0;\n    textShow = false;\n    currentHinh: string;\n    danhgias: DanhGia[] = [];\n    ratings: Rating[] = [];\n    users: Taikhoan[] = [];\n    currentUser: Taikhoan;\n    subscriptions: Subscription[] = [];\n    frm: FormGroup;\n    //chitietHDXs: ChiTietHoaDonXuat[] = [];\n    //hoadonxuats: HoaDonXuat[] = [];\n    constructor(\n        private userService: TaikhoanService,\n        private activatedRoute: ActivatedRoute,\n        private _formBuilder: FormBuilder,\n        private loginService: LoginService,\n        private productdetailService: ProductDetailService\n    ) {}\n\n    ngOnInit() {\n        this.loadData();\n        this.createForm();\n    }\n    ngOnDestroy(): void {\n        if (this.subscriptions) {\n            this.subscriptions.forEach(e => {\n                e.unsubscribe();\n            });\n        }\n    }\n    createForm() {\n        this.frm = this._formBuilder.group({\n            NoiDung: [\n                '',\n                [\n                    Validators.required,\n                    Validators.minLength(2),\n                    Validators.maxLength(50)\n                ]\n            ],\n            Diem: [this.currentRate, [Validators.required]],\n            idSanPham: [this.activatedRoute.params['value'].id],\n            idTaikhoan: [this.currentUser ? this.currentUser.id : '']\n        });\n    }\n    onSubmitForm() {\n        this.productdetailService.createRating(this.frm.value);\n    }\n    loadData() {\n        this.subscriptions.push(\n            this.productdetailService.RatingDetailObs.subscribe(data => {\n                if (data) {\n                    this.ratings = data;\n                }\n            }),\n            this.activatedRoute.params.subscribe(data => {\n                if (this.currentUser) {\n                    this.createForm();\n                    this.productdetailService.checkBill(\n                        this.currentUser ? this.currentUser.id : '',\n                        this.activatedRoute.params['value'].id\n                    );\n                } else {\n                    this.productdetailService.CanRateDetailSub.next(false);\n                }\n            }),\n            this.loginService.currentUser.subscribe(data => {\n                this.currentUser = data;\n                if (this.currentUser) {\n                    this.createForm();\n                    this.productdetailService.checkBill(\n                        this.currentUser.id,\n                        this.activatedRoute.params['value'].id\n                    );\n                }\n            }),\n            this.productdetailService.CanRateDetailObs.subscribe(data => {\n                this.canRate = data;\n            }),\n            this.userService.currentUser.subscribe(\n                data => {\n                    this.users = data;\n                },\n                err => {}\n            )\n        );\n    }\n    onDeleteDanhGia(e) {\n        this.productdetailService.deleteRating(e);\n    }\n    duocxoa(item: DanhGia) {\n        if (!this.currentUser) {\n            return false;\n        }\n        return item.idTaikhoan === this.currentUser.id;\n    }\n    get_DiemTrungBinh(): number {\n        if (this.ratings && this.ratings.length === 0) {\n            return 0;\n        }\n        const w = this.ratings.reduce((tongdiem, item) => {\n            return (tongdiem += item.Diem);\n        }, 0);\n        return w / this.ratings.length;\n    }\n    get_CountDanhGia() {\n        return this.ratings.length;\n    }\n    get_TiLeDanhGia(number: number) {\n        if (this.ratings.length === 0) {\n            return 0;\n        }\n        const w = this.ratings.filter(e => {\n            return e.Diem === number;\n        }).length;\n        return (w / this.ratings.length) * 100;\n    }\n\n}\n","<div class=\"d-flex flex-column flex-lg-row p-0\">\n    <div class=\"card col-12 col-lg mat-elevation-z1\">\n        <div class=\"card-body p-0 p-md-3\">\n            <div class=\"col text-center d-flex justify-content-center align-items-center p-3 flex-wrap\"\n                style=\"font-size: 1.5rem\">\n                <div class=\"text-danger col-12\">Đánh giá tổng quan</div>\n                <span class=\"text-warning mx-3\">\n                    {{get_DiemTrungBinh() | number:'0.1-2'}}\n                    <i class=\"fas fa-star \"></i>\n                </span>\n                <span class=\"mx-3\">|</span>\n                <div class=\"mx-3 text-danger\">\n                    <span class=\"fas fa-user\"></span> {{ get_CountDanhGia() }}\n                </div>\n            </div>\n            <div class=\"col d-flex -flex-column justify-content-around\">\n                <div class=\"row rating-desc w-100\">\n                    <ng-container *ngFor=\"let i of [5,4,3,2,1]\">\n                        <div class=\"col-3 col-md-2 text-left\">\n                            <span class=\"fas fa-star text-warning\"></span>{{i}}\n                        </div>\n                        <div class=\"col-9\">\n                            <div class=\"progress progress-striped\">\n                                <div class=\"progress-bar progress-bar-success\" role=\"progressbar\" aria-valuenow=\"20\"\n                                    aria-valuemin=\"0\" aria-valuemax=\"100\" [style.width.%]=\"get_TiLeDanhGia(i)\">\n                                    <span class=\"\">\n                                        {{ get_TiLeDanhGia(i) | number:'0.1-2' }}%\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n                    </ng-container>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"card col-lg-5 col-12 p-0 ml-lg-2 mt-2 mt-lg-0  mat-elevation-z1\" *ngIf=\"canRate\">\n        <div class=\"card-header h-100\">\n            <form [formGroup]=\"frm\" (ngSubmit)=\"onSubmitForm()\">\n                <span class=\"font-weight-bold\" style=\"font-size: 1.3rem \">Viết đánh giá</span>\n                <div class=\"d-flex flex-row py-2\">\n                    <span class=\"mr-auto\" style=\"font-size: 1rem\">Đánh giá</span>\n                    <ngb-rating [(rate)]=\"currentRate\" max=\"5\" formControlName=\"Diem\">\n                        <ng-template let-fill=\"fill\" let-index=\"index\">\n                            <span class=\"fas fa-star mystar\" [class.filled]=\"fill === 100\"></span>\n                        </ng-template>\n                    </ngb-rating>\n\n                    <div>\n                        <input type=\"hidden\" class=\"rating rating_diem\" data-filled=\"fas fa-star fa-1x text-warning\"\n                            data-empty=\"far fa-star fa-1x text-warning\" value=\"5\" data-step=\"1\" />\n                    </div>\n                </div>\n                <textarea class=\"form-control rating_content\" cols=\"30\" rows=\"4\" placeholder=\"Viết nội dung đánh giá\"\n                    formControlName=\"NoiDung\"></textarea>\n                <div class=\"py-2 d-flex\">\n                    <button class=\"btn btn-danger ml-auto btn_send_danhgia\">Gửi</button>\n                </div>\n            </form>\n\n        </div>\n    </div>\n</div>\n<div class=\"box_row_danhgia\">\n</div>\n<div class=\"d-flex  w-100\">\n    <div class=\"spinner-border text-success mx-auto invisible box_spiner_loading\"></div>\n</div>\n<div class=\"card  my-4  mat-elevation-z1 overflow-hidden border-0\" *ngFor=\"let item of ratings\">\n    <div class=\"card-header d-flex flex-row px-1  p-md-2  align-items-center text-white\"\n        style=\"background: #1976d2 !important\">\n        <div class=\"p-0 mr-2\">\n            <img *ngIf=\"item?.idTaikhoan\" src=\"{{api_url}}/upload/user/{{ item?.hinh?item.hinh:'no_image.png'}}\"             \n                class=\"rounded-circle\" style=\"width:2rem;height: 2rem;\">\n        </div>\n        <div class=\"d-flex flex-column\">\n            <span class=\"text-truncate\" style=\"font-size: 1.1rem;line-height: 2rem;font-size: 1rem;max-width: 7rem\">\n                {{item?.hoTen |titlecase}}\n            </span>\n\n        </div>\n        <i class=\"ml-auto mr-2\" style=\"line-height: 2rem;font-size: 0.7rem\">{{ item.updated_at }}</i>\n        <!-- <div style=\"line-height: 2rem;\">\n            <input style=\"line-height: 2rem;\" type=\"hidden\" class=\"rating \" data-filled=\"fas fa-star fa-1x text-warning\"\n                data-empty=\"far fa-star fa-1x text-warning\" data-readonly value=\"\" />\n        </div> -->\n        <div style=\"width: 30px\">\n            <div class=\" menu_delete d-flex flex-row\" *ngIf=\"duocxoa(item)\">\n                <button mat-icon-button [matMenuTriggerFor]=\"menu\">\n                    <span class=\"fas fa-ellipsis-v \"></span>\n                </button>\n                <mat-menu #menu=\"matMenu\">\n                    <button class=\"w-100 text-center\" mat-menu-item (click)=\"onDeleteDanhGia(item)\">Xóa</button>\n\n                </mat-menu>\n            </div>\n        </div>\n    </div>\n    <div class=\"card-body d-flex flex-row\">\n        <div class=\"d-flex flex-column\">\n            <ngb-rating [(rate)]=\"item.Diem\" max=\"5\" [readonly]=\"true\">\n                <ng-template let-fill=\"fill\" let-index=\"index\">\n                    <span class=\"fas fa-star \" [class.filled]=\"fill === 100\"></span>\n                </ng-template>\n            </ngb-rating>\n            <span style=\"font-size: 1rem\">{{ item?.NoiDung }}</span>\n        </div>\n    </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LoadingComponent } from './loading.component';\n\n@NgModule({\n  declarations: [LoadingComponent],\n  imports: [CommonModule],\n  exports: [LoadingComponent]\n})\nexport class LoadingModule { }\n"]}